{
  "utilities": {},
  "programModules": {
    "EXT001MI": {
      "program": "EXT001MI",
      "triggers": {},
      "transactions": {
        "LstSupervisor": {
          "sourceUuid": "5ddf9784-aff3-4868-86e2-57055591c8c4",
          "name": "LstSupervisor",
          "program": "EXT001MI",
          "description": "List for Supervisor",
          "active": true,
          "multi": true,
          "modified": 1627932298216,
          "modifiedBy": "IIGUANA",
          "outputFields": [
            {
              "name": "HIST",
              "description": "History",
              "length": 1,
              "mandatory": false,
              "type": "N"
            },
            {
              "name": "ZTRI",
              "description": "Trailer ID",
              "length": 15,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "ZCDT",
              "description": "Registered Date",
              "length": 8,
              "mandatory": false,
              "type": "N"
            },
            {
              "name": "ZCTM",
              "description": "Registered Time",
              "length": 6,
              "mandatory": false,
              "type": "N"
            },
            {
              "name": "SEQN",
              "description": "Sequence",
              "length": 3,
              "mandatory": false,
              "type": "N"
            },
            {
              "name": "ZACT",
              "description": "Activity Time",
              "length": 15,
              "mandatory": false,
              "type": "N"
            },
            {
              "name": "TADU",
              "description": "Total Activity Duration",
              "length": 15,
              "mandatory": false,
              "type": "N"
            },
            {
              "name": "ACTI",
              "description": "Scale Activity",
              "length": 10,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "ORNO",
              "description": "M3 Order Number",
              "length": 15,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "ITDS",
              "description": "Item Designation",
              "length": 60,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "STAS",
              "description": "In Progress Indicator",
              "length": 1,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "WGHT",
              "description": "Weight",
              "length": 15,
              "mandatory": false,
              "type": "N"
            },
            {
              "name": "UNMS",
              "description": "Unit of Measure",
              "length": 3,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "SCID",
              "description": "Scale Indicator",
              "length": 15,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "LOCA",
              "description": "Location",
              "length": 10,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "TRAC",
              "description": "Tractor ID",
              "length": 15,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "USER",
              "description": "M3 User",
              "length": 10,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "SEAL",
              "description": "Seals Number",
              "length": 60,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "SCRP",
              "description": "Reporting Date",
              "length": 8,
              "mandatory": false,
              "type": "N"
            },
            {
              "name": "WHLO",
              "description": "Warehouse",
              "length": 3,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "FACI",
              "description": "Facility",
              "length": 3,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "CUNM",
              "description": "Customer Name",
              "length": 36,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "PDLN",
              "description": "Product line",
              "length": 10,
              "mandatory": false,
              "type": "A"
            }
          ],
          "inputFields": [
            {
              "name": "CONO",
              "description": "Company",
              "length": 3,
              "mandatory": true,
              "type": "N"
            },
            {
              "name": "WHLO",
              "description": "Warehouse",
              "length": 3,
              "mandatory": true,
              "type": "A"
            },
            {
              "name": "STAS",
              "description": "In Progress Indicator",
              "length": 30,
              "mandatory": true,
              "type": "A"
            },
            {
              "name": "HIST",
              "description": "History",
              "length": 1,
              "mandatory": true,
              "type": "N"
            },
            {
              "name": "TRID",
              "description": "Trailer ID",
              "length": 15,
              "mandatory": false,
              "type": "A"
            },
            {
              "name": "PDLN",
              "description": "Product Line",
              "length": 2,
              "mandatory": false,
              "type": "A"
            }
          ],
          "utilities": []
        }
      },
      "batches": {}
    }
  },
  "sources": {
    "5ddf9784-aff3-4868-86e2-57055591c8c4": {
      "uuid": "5ddf9784-aff3-4868-86e2-57055591c8c4",
      "updated": 1653652117556,
      "updatedBy": "JCONCON",
      "created": 1612506864017,
      "createdBy": "PFERRER",
      "apiVersion": "0.9",
      "beVersion": "16.0.0.20220324091964",
      "codeHash": "DB0BE958E15EE28C6861DE57CE3403E1741CA9C2D82C6FB953C5EDFACA792312",
      "code": "LyoqDQogKiBFWFQwMDFNSS5Mc3RTdXBlcnZpc29yDQogKiBEYXRlICAgICAgICAgQ2hhbmdlZCBieSAgICAgICAgICBEZXNjcmlwdGlvbg0KICogMjAyMTAyMDQgICAgIFBGRVJSRVIgICAgICAgICAgICAgTGlzdCBTdXBlcnZpc29yDQogKiAyMDIxMDQyOCAgICAgUEZFUlJFUiAgICAgICAgICAgICBBZGRlZCBmaWVsZCB2YWx1ZSBmb3IgQUNUTSwgcmV0cmlldmUgZGV0YWlscyBmb3IgU1dJVENIIG9yZGVycw0KICogMjAyMTA1MjUgICAgIFBGRVJSRVIgICAgICAgICAgICAgQ2hhbmdlZCBwYXJhbWV0ZXIgbGVuZ3RoIFpBQ1QgYW5kIFRBRFUgdG8gMTUNCiAqIDIwMjEwNjA0ICAgICBQRkVSUkVSICAgICAgICAgICAgIEFkZGVkIHJldHVybiB3aGVuIGVycm9yIGlzIGVuY291bnRlcmVkLCBpbml0aWFsaXplIE9STE4sIGFkZGVkIHZhbGlkYXRpb24gd2hlbiBpZiBkYXRlIGlzIG51bGwNCiAqIDIwMjEwNjA4ICAgICBTTUFHTkFZICAgICAgICAgICAgIEFkZGVkIFBETE4gYXMgb3V0cHV0IGRhdGEgYW5kIHJlcGxhY2UgQ1VOTSB2YWx1ZSB3aXRoIEZhY2lsaXR5TmFtZQ0KICogMjAyMTA4MDIgICAgIElJR1VBTkEgICAgICAgICAgICAgRmllbGRzIFpBQ1QgYW5kIFRBRFUgaW5jb3JyZWN0bHkgc2l6ZSB0byA2IHRodXMgdHJ1bmNhdGVkIHRoZSBtaW51dGVzLiBDb3JyZWN0ZWQgcGFyYW1ldGVyIGxlbmd0aCBaQUNUIGFuZCBUQURVIHRvIDE1DQogKiAyMDIyMDQyNyAgICAgSkNPTkNPTiAgICAgICAgICAgICBDbGVhciB0aGUgdmFsdWUgb2YgdmFyaWFibGUgelBETE4gd2hlbiBibGFuayBmcm9tIE1NUzAwMi4NCiAqKi8NCg0KaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXI7DQppbXBvcnQgamF2YS50aW1lLio7DQogDQpwdWJsaWMgY2xhc3MgTHN0U3VwZXJ2aXNvciBleHRlbmRzIEV4dGVuZE0zVHJhbnNhY3Rpb24gew0KICBwcml2YXRlIGZpbmFsIE1JQVBJIG1pOw0KICBwcml2YXRlIGZpbmFsIExvZ2dlckFQSSBsb2dnZXI7DQogIHByaXZhdGUgZmluYWwgUHJvZ3JhbUFQSSBwcm9ncmFtOw0KICBwcml2YXRlIGZpbmFsIERhdGFiYXNlQVBJIGRhdGFiYXNlOw0KICBwcml2YXRlIGZpbmFsIE1JQ2FsbGVyQVBJIG1pQ2FsbGVyDQogIA0KICBwcml2YXRlIFN0cmluZyBpbkNPTk8sIGluV0hMTywgaW5TVEFTLCBpbkhJU1QsIGluVFJJRCwgaW5QRExOLCBJVE5PTElORTsNCiAgcHJpdmF0ZSBpbnQgcmVhZEtleXMsIHJlYWRLZXlzMjsNCiAgcHJpdmF0ZSBTdHJpbmcgeklURFMsIHpDVU5PLCB6Q1VOTSwgek9STk8sIHpTVU5PLCB6UERMTjsNCiAgcHJpdmF0ZSBib29sZWFuIGlzUE8sIGlzQ08sIGlzRE87DQogIA0KICBwdWJsaWMgTHN0U3VwZXJ2aXNvcihNSUFQSSBtaSwgTG9nZ2VyQVBJIGxvZ2dlciwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBEYXRhYmFzZUFQSSBkYXRhYmFzZSwgTUlDYWxsZXJBUEkgbWlDYWxsZXIpIHsNCiAgICB0aGlzLm1pID0gbWk7DQogICAgdGhpcy5sb2dnZXIgPSBsb2dnZXI7DQogICAgdGhpcy5wcm9ncmFtID0gcHJvZ3JhbTsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogICAgdGhpcy5taUNhbGxlciA9IG1pQ2FsbGVyOw0KICB9DQogIA0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIEFycmF5TGlzdDxTdHJpbmdbXT4gbGlzdFJlc3VsdCA9IG5ldyBBcnJheUxpc3Q8U3RyaW5nW10+KCk7DQogICAgSXRlcmF0b3I8U3RyaW5nW10+IGxpc3RSZXN1bHRJdGVyYXRvciA9IG51bGw7DQogICAgDQogICAgLy8gLSBHZXQgaW5wdXQgdmFsdWVzDQogICAgaW5DT05PID0gbWkuaW5EYXRhLmdldCgiQ09OTyIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkNPTk8iKS50cmltKCk7DQogICAgaW5XSExPID0gbWkuaW5EYXRhLmdldCgiV0hMTyIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIldITE8iKS50cmltKCk7DQogICAgaW5TVEFTID0gbWkuaW5EYXRhLmdldCgiU1RBUyIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlNUQVMiKS50cmltKCk7DQogICAgaW5ISVNUID0gbWkuaW5EYXRhLmdldCgiSElTVCIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIkhJU1QiKS50cmltKCk7DQogICAgaW5UUklEID0gbWkuaW5EYXRhLmdldCgiVFJJRCIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlRSSUQiKS50cmltKCk7DQogICAgaW5QRExOID0gbWkuaW5EYXRhLmdldCgiUERMTiIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIlBETE4iKS50cmltKCk7DQogICAgDQogICAgLy8gLSBWYWxpZGF0ZSByZXF1aXJlZCBpbnB1dCB2YWx1ZXMNCiAgICBpZigiIi5lcXVhbHMoaW5DT05PKSl7DQogICAgICBtaS5lcnJvcigiQ29tcGFueSBpcyBtYW5kYXRvcnkiKTsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYoIiIuZXF1YWxzKGluV0hMTykpew0KICAgICAgbWkuZXJyb3IoIldhcmVob3VzZSBpcyBtYW5kYXRvcnkiKTsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYoIiIuZXF1YWxzKGluU1RBUykpew0KICAgICAgbWkuZXJyb3IoIkluIFByb2dyZXNzIEluZGljYXRvciBpcyBtYW5kYXRvcnkiKTsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgaWYoIiIuZXF1YWxzKGluSElTVCkpew0KICAgICAgbWkuZXJyb3IoIkhpc3RvcnkgaXMgbWFuZGF0b3J5Iik7DQogICAgICByZXR1cm47DQogICAgfQ0KICAgIA0KICAgIC8vIFNlYXJjaCB0cmFpbGVyIElEIGxpc3QNCiAgICBEQkFjdGlvbiBkYkFjdGlvbjsNCiAgICBFeHByZXNzaW9uRmFjdG9yeSBleHAgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiTUlUQkFMIik7DQogICAgZXhwID0gZXhwLmVxKCJNQldIU0wiLCAiUzgxIik7DQogICAgZXhwID0gZXhwLmFuZChleHAuZXEoIk1CU1RUWCIsIGluU1RBUykpOw0KICAgIGRiQWN0aW9uID0gZGF0YWJhc2UudGFibGUoIk1JVEJBTCIpLmluZGV4KCIwMCIpLm1hdGNoaW5nKGV4cCkuc2VsZWN0aW9uKCJNQklUTk8iKS5idWlsZCgpOw0KICAgIA0KICAgIERCQ29udGFpbmVyIE1JVEJBTCA9IGRiQWN0aW9uLmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIE1JVEJBTC5zZXRJbnQoIk1CQ09OTyIsIGluQ09OTy50b0ludGVnZXIoKSk7DQogICAgTUlUQkFMLnNldCgiTUJXSExPIiwgaW5XSExPKTsNCiAgICBpZighIiIuZXF1YWxzKGluVFJJRCkpIHsNCiAgICAgIE1JVEJBTC5zZXQoIk1CSVROTyIsIGluVFJJRCk7DQogICAgICByZWFkS2V5cyA9IDM7DQogICAgfSBlbHNlIHsNCiAgICAgIHJlYWRLZXlzID0gMjsNCiAgICB9DQogICAgDQogICAgQ2xvc3VyZTw/PiBsaXN0UmVjb3JkcyA9IHtEQkNvbnRhaW5lciBkYXRhIC0+DQogICAgICANCiAgICAgIFN0cmluZyBJVE5PID0gZGF0YS5nZXQoIk1CSVROTyIpLnRvU3RyaW5nKCkudHJpbSgpOw0KICAgIA0KICAgICAgLy8gUmV0cmlldmUgc2NhbGUgICANCiAgICAgIEV4cHJlc3Npb25GYWN0b3J5IGV4cDIgPSBkYXRhYmFzZS5nZXRFeHByZXNzaW9uRmFjdG9yeSgiRVhUU0NMIik7DQogICAgICBleHAyID0gZXhwMi5lcSgiRVhISVNUIiwgIjAiKTsNCiAgICAgIGV4cDIgPSBleHAyLmFuZChleHAyLmVxKCJFWFdITE8iLCBpbldITE8pKTsNCiAgICAgIERCQWN0aW9uIGRiQWN0aW9uMiA9IGRhdGFiYXNlLnRhYmxlKCJFWFRTQ0wiKS5pbmRleCgiMDAiKS5tYXRjaGluZyhleHAyKS5zZWxlY3RBbGxGaWVsZHMoKS5idWlsZCgpOw0KICAgICAgREJDb250YWluZXIgRVhUU0NMID0gZGJBY3Rpb24yLmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgICAgRVhUU0NMLnNldEludCgiRVhDT05PIiwgaW5DT05PLnRvSW50ZWdlcigpKTsNCiAgICAgIEVYVFNDTC5zZXQoIkVYVFJJRCIsIElUTk8pOw0KICAgICAgcmVhZEtleXMyID0gMjsNCg0KICAgICAgQ2xvc3VyZTw/PiBsaXN0RVhUU0NMID0ge0RCQ29udGFpbmVyIGRhdGFFWFRTQ0wgLT4NCiAgICAgICAgDQogICAgICAgIFN0cmluZ1tdIGN1cnJSZXN1bHQgPSBbDQogICAgICAgICAgZGF0YUVYVFNDTC5nZXQoIkVYT1JOTyIpLnRvU3RyaW5nKCkudHJpbSgpLA0KICAgICAgICAgIGRhdGFFWFRTQ0wuZ2V0KCJFWE9STE4iKS50b1N0cmluZygpLnRyaW0oKSwNCiAgICAgICAgICBkYXRhRVhUU0NMLmdldCgiRVhMT0lEIikudG9TdHJpbmcoKS50cmltKCksDQogICAgICAgICAgZGF0YUVYVFNDTC5nZXQoIkVYSElTVCIpLnRvU3RyaW5nKCkudHJpbSgpLA0KICAgICAgICAgIGRhdGFFWFRTQ0wuZ2V0KCJFWFRSSUQiKS50b1N0cmluZygpLnRyaW0oKSwNCiAgICAgICAgICBkYXRhRVhUU0NMLmdldCgiRVhTQ0RUIikudG9TdHJpbmcoKS50cmltKCksDQogICAgICAgICAgZGF0YUVYVFNDTC5nZXQoIkVYU0NUTSIpLnRvU3RyaW5nKCkudHJpbSgpLA0KICAgICAgICAgIGRhdGFFWFRTQ0wuZ2V0KCJFWFNFUU4iKS50b1N0cmluZygpLnRyaW0oKSwNCiAgICAgICAgICBkYXRhRVhUU0NMLmdldCgiRVhBQ1RJIikudG9TdHJpbmcoKS50cmltKCksDQogICAgICAgICAgZGF0YUVYVFNDTC5nZXQoIkVYU1RBUyIpLnRvU3RyaW5nKCkudHJpbSgpLA0KICAgICAgICAgIGRhdGFFWFRTQ0wuZ2V0KCJFWFdHSFQiKS50b1N0cmluZygpLnRyaW0oKSwNCiAgICAgICAgICBkYXRhRVhUU0NMLmdldCgiRVhTQ0lEIikudG9TdHJpbmcoKS50cmltKCksDQogICAgICAgICAgZGF0YUVYVFNDTC5nZXQoIkVYTE9DQSIpLnRvU3RyaW5nKCkudHJpbSgpLA0KICAgICAgICAgIGRhdGFFWFRTQ0wuZ2V0KCJFWFRSQUMiKS50b1N0cmluZygpLnRyaW0oKSwNCiAgICAgICAgICBkYXRhRVhUU0NMLmdldCgiRVhVU0VSIikudG9TdHJpbmcoKS50cmltKCksDQogICAgICAgICAgZGF0YUVYVFNDTC5nZXQoIkVYU0VBTCIpLnRvU3RyaW5nKCkudHJpbSgpLA0KICAgICAgICAgIGRhdGFFWFRTQ0wuZ2V0KCJFWFNDUlAiKS50b1N0cmluZygpLnRyaW0oKSwNCiAgICAgICAgICBkYXRhRVhUU0NMLmdldCgiRVhXSExPIikudG9TdHJpbmcoKS50cmltKCksDQogICAgICAgICAgZGF0YUVYVFNDTC5nZXQoIkVYRkFDSSIpLnRvU3RyaW5nKCkudHJpbSgpDQogICAgICAgIF07DQogICAgICAgIGxpc3RSZXN1bHQuYWRkKGN1cnJSZXN1bHQpOw0KICAgICAgfQ0KICAgICAgZGJBY3Rpb24yLnJlYWRBbGwoRVhUU0NMLCByZWFkS2V5czIsIGxpc3RFWFRTQ0wpDQogICAgfQ0KICAgIA0KICAgIGlmKCFkYkFjdGlvbi5yZWFkQWxsKE1JVEJBTCwgcmVhZEtleXMsIGxpc3RSZWNvcmRzKSl7DQogICAgICBtaS5lcnJvcigiUmVjb3JkIGRvZXMgbm90IGV4aXN0Iik7DQogICAgICByZXR1cm47DQogICAgfQ0KICAgIA0KICAgIGludCBjdHIgPSAwOw0KICAgIGxpc3RSZXN1bHRJdGVyYXRvciA9IGxpc3RSZXN1bHQuaXRlcmF0b3IoKTsNCiAgICBab25lZERhdGVUaW1lIGN1cnJEYXRlID0gZ2V0VVRDRGF0ZVRpbWUoaW5XSExPLCAiIiwgIiIpOw0KICAgIFN0cmluZyBBQ1RNLCBUQURVLCBmaXJzdFNDRFQsIGZpcnN0U0NUTTsNCiAgICBTdHJpbmcgcHJldk9STk8gPSAiIiwgcHJldk9STE49ICIwIjsNCiAgICANCiAgICB3aGlsZShsaXN0UmVzdWx0SXRlcmF0b3IuaGFzTmV4dCgpKSB7DQogICAgICBTdHJpbmdbXSBjdXJyUmVzdWx0ID0gbGlzdFJlc3VsdEl0ZXJhdG9yLm5leHQoKTsNCiAgICAgIGJvb2xlYW4gb3V0cHV0UmVjb3JkID0gZmFsc2U7DQogICAgICBib29sZWFuIG91dHB1dFBETE5SZWNvcmQgPSB0cnVlOw0KICAgICAgDQogICAgICBpZiAoY3RyID09IDApIHsNCiAgICAgICAgQUNUTSA9ICIwZCAwaCAwbSI7DQogICAgICAgIFRBRFUgPSAiMGQgMGggMG0iOw0KICAgICAgICBmaXJzdFNDRFQgPSBjdXJyUmVzdWx0WzVdOw0KICAgICAgICBmaXJzdFNDVE0gPSBjdXJyUmVzdWx0WzZdOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgU3RyaW5nW10gcHJldlJlc3VsdCA9IGxpc3RSZXN1bHQuZ2V0KGN0ci0xKTsNCiAgICAgICAgcHJldk9STk8gPSBwcmV2UmVzdWx0WzBdOw0KICAgICAgICBwcmV2T1JMTiA9IHByZXZSZXN1bHRbMV07DQogICAgICAgIGlmICghY3VyclJlc3VsdFs0XS5lcXVhbHMocHJldlJlc3VsdFs0XSkgfHwgIWN1cnJSZXN1bHRbMF0uZXF1YWxzKHByZXZSZXN1bHRbMF0pKSB7DQogICAgICAgICAgQUNUTSA9ICIwZCAwaCAwbSI7DQogICAgICAgICAgVEFEVSA9ICIwZCAwaCAwbSI7DQogICAgICAgICAgZmlyc3RTQ0RUID0gY3VyclJlc3VsdFs1XTsNCiAgICAgICAgICBmaXJzdFNDVE0gPSBjdXJyUmVzdWx0WzZdOw0KICAgICAgICB9DQogICAgICB9DQogICAgICANCiAgICAgIC8vIG91cHV0IGxhc3QgcmVjb3JkDQogICAgICBpZiAoIWxpc3RSZXN1bHRJdGVyYXRvci5oYXNOZXh0KCkpIHsNCiAgICAgICAgb3V0cHV0UmVjb3JkID0gdHJ1ZTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIG91dHB1dCBsYXN0IHJlY29yZCBmb3IgVFJJRA0KICAgICAgICBTdHJpbmdbXSBuZXh0UmVzdWx0ID0gbGlzdFJlc3VsdC5nZXQoY3RyKzEpOw0KICAgICAgICBpZiAoIW5leHRSZXN1bHRbNF0uZXF1YWxzKGN1cnJSZXN1bHRbNF0pKSB7DQogICAgICAgICAgb3V0cHV0UmVjb3JkID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgDQogICAgICBpZiAob3V0cHV0UmVjb3JkKSB7DQogICAgICAgIHpJVERTID0gIiI7DQogICAgICAgIHpDVU5NID0gIiI7DQogICAgICAgIHpDVU5PID0gIiI7DQogICAgICAgIHpPUk5PID0gIiI7DQogICAgICAgIHpTVU5PID0gIiI7DQogICAgICAgIHpQRExOID0gIiI7IC8vIDIwMjIwNDI3IEFkZCAtIEpDT05DT04gQ2xlYXIgdGhlIHZhbHVlIG9mIHZhcmlhYmxlIHpQRExOIHdoZW4gYmxhbmsgZnJvbSBNTVMwMDIuDQogICAgICAgIGlzUE8gPSBmYWxzZTsNCiAgICAgICAgaXNDTyA9IGZhbHNlOw0KICAgICAgICBpc0RPID0gZmFsc2U7DQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgaWYgKGN1cnJSZXN1bHRbOF0udHJpbSgpLmVxdWFsc0lnbm9yZUNhc2UoIlNXSVRDSCIpKSB7DQogICAgICAgICAgZ2V0T3JkZXJEZXRhaWxzKHByZXZPUk5PLCBwcmV2T1JMTiwgY3VyclJlc3VsdFsxN10pOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmICghIiIuZXF1YWxzKGN1cnJSZXN1bHRbMF0pICl7DQogICAgICAgICAgICBnZXRPcmRlckRldGFpbHMoY3VyclJlc3VsdFswXSwgY3VyclJlc3VsdFsxXSwgY3VyclJlc3VsdFsxN10pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZighIiIuZXF1YWxzKGN1cnJSZXN1bHRbMl0pKSB7DQogICAgICAgICAgICAgIGdldExvYWRJZERldGFpbHMoY3VyclJlc3VsdFsyXSwgY3VyclJlc3VsdFsxN10pOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgDQogICAgICAgIGlmICghaW5QRExOLmVxdWFscygiIikpIHsNCiAgICAgICAgICBpZiAoelBETE4uZXF1YWxzKCIiKSkgew0KICAgICAgICAgICAgb3V0cHV0UERMTlJlY29yZCA9IGZhbHNlOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBpZiAoIXpQRExOLmVxdWFscyhpblBETE4pKSB7DQogICAgICAgICAgICAgIG91dHB1dFBETE5SZWNvcmQgPSBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGlmIChvdXRwdXRQRExOUmVjb3JkKSB7IA0KICAgICAgICANCiAgICAgICAgICBTdHJpbmcgdW5pdE9mTWVhc3VyZSA9ICIiOw0KICAgICAgICAgIGlmICghY3VyclJlc3VsdFsxMV0uZXF1YWxzKCIiKSkgew0KICAgICAgICAgICAgdW5pdE9mTWVhc3VyZSA9IGdldFVuaXRPZk1lYXN1cmUoY3VyclJlc3VsdFsxMV0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICANCiAgICAgICAgICANCiAgICAgICAgICBTdHJpbmcgdGltZSA9IGN1cnJSZXN1bHRbNl0ucGFkTGVmdCg0LCAiMCIpLnBhZFJpZ2h0KDYsICIwIik7DQogICAgICAgICAgDQogICAgICAgICAgWm9uZWREYXRlVGltZSBwcmV2RGF0ZSA9IGdldFVUQ0RhdGVUaW1lKGN1cnJSZXN1bHRbMTddLCBjdXJyUmVzdWx0WzVdLCB0aW1lKTsNCiAgICAgICAgICBEdXJhdGlvbiBkdXJhdGlvbiA9IER1cmF0aW9uLmJldHdlZW4ocHJldkRhdGUsIGN1cnJEYXRlKTsNCiAgICAgICAgICBsb25nIGRpZmZNaWxsaSA9IGR1cmF0aW9uLnRvTWlsbGlzKCk7DQogICAgICAgICAgaW50IGRpZmZNaW5zID0gKGludCkoZGlmZk1pbGxpLmludGRpdig2MDAwMCkpJTYwOw0KICAgICAgICAgIGludCBkaWZmSG91cnMgPSAoaW50KShkaWZmTWlsbGkuaW50ZGl2KDM2MDAwMDApKSUyNDsNCiAgICAgICAgICBpbnQgZGlmZkRheXMgPSAoaW50KShkaWZmTWlsbGkuaW50ZGl2KDg2NDAwMDAwKSklNjA7DQogICAgICAgICAgQUNUTSA9IGRpZmZEYXlzICsgImQgIiArIGRpZmZIb3VycyArICJoICIgKyBkaWZmTWlucyArICJtIjsNCiAgICAgICAgICANCiAgICAgICAgICAvLyBjYWxjdWxhdGUgVEFEVTogY3VycmVudCBkYXRlL3RpbWUgLSBmaXJzdCBkYXRlL3RpbWUgZm9yIFRSSUQvT1JOTw0KICAgICAgICAgIHRpbWUgPSBmaXJzdFNDVE0ucGFkTGVmdCg0LCAiMCIpLnBhZFJpZ2h0KDYsICIwIik7DQogICAgICAgICAgWm9uZWREYXRlVGltZSBmaXJzdERhdGUgPSBnZXRVVENEYXRlVGltZShjdXJyUmVzdWx0WzE3XSwgZmlyc3RTQ0RULCB0aW1lKTsNCiAgICAgICAgICBkdXJhdGlvbiA9IER1cmF0aW9uLmJldHdlZW4oZmlyc3REYXRlLCBjdXJyRGF0ZSk7DQogICAgICAgICAgZGlmZk1pbGxpID0gZHVyYXRpb24udG9NaWxsaXMoKTsNCiAgICAgICAgICBkaWZmTWlucyA9IChpbnQpKGRpZmZNaWxsaS5pbnRkaXYoNjAwMDApKSU2MDsNCiAgICAgICAgICBkaWZmSG91cnMgPSAoaW50KShkaWZmTWlsbGkuaW50ZGl2KDM2MDAwMDApKSUyNDsNCiAgICAgICAgICBkaWZmRGF5cyA9IChpbnQpKGRpZmZNaWxsaS5pbnRkaXYoODY0MDAwMDApKSU2MDsNCiAgICAgICAgICBUQURVID0gZGlmZkRheXMgKyAiZCAiICsgZGlmZkhvdXJzICsgImggIiArIGRpZmZNaW5zICsgIm0iOw0KICAgICAgICAgIA0KICAgICAgICAgIA0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJPUk5PIiwgek9STk8pOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJJVERTIiwgeklURFMpOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJDVU5NIiwgekNVTk0pOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJVTk1TIiwgdW5pdE9mTWVhc3VyZSk7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIkhJU1QiLCBjdXJyUmVzdWx0WzNdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiWlRSSSIsIGN1cnJSZXN1bHRbNF0pOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJaQ0RUIiwgY3VyclJlc3VsdFs1XSk7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlpDVE0iLCBjdXJyUmVzdWx0WzZdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU0VRTiIsIGN1cnJSZXN1bHRbN10pOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJBQ1RJIiwgY3VyclJlc3VsdFs4XSk7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlNUQVMiLCBjdXJyUmVzdWx0WzldKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiV0dIVCIsIGN1cnJSZXN1bHRbMTBdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU0NJRCIsIGN1cnJSZXN1bHRbMTFdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiTE9DQSIsIGN1cnJSZXN1bHRbMTJdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiVFJBQyIsIGN1cnJSZXN1bHRbMTNdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiVVNFUiIsIGN1cnJSZXN1bHRbMTRdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU0VBTCIsIGN1cnJSZXN1bHRbMTVdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiU0NSUCIsIGN1cnJSZXN1bHRbMTZdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiV0hMTyIsIGN1cnJSZXN1bHRbMTddKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiRkFDSSIsIGN1cnJSZXN1bHRbMThdKTsNCiAgICAgICAgICBtaS5vdXREYXRhLnB1dCgiWkFDVCIsIEFDVE0pOw0KICAgICAgICAgIG1pLm91dERhdGEucHV0KCJUQURVIiwgVEFEVSk7DQogICAgICAgICAgbWkub3V0RGF0YS5wdXQoIlBETE4iLCB6UERMTik7DQogICAgICAgICAgbWkud3JpdGUoKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgY3RyKys7DQogICAgfQ0KICAgIA0KICB9DQogIA0KICAvKioNCiAgICogR2V0IG9yZGVyIGRldGFpbHMNCiAgICoqLw0KICBwcml2YXRlIHZvaWQgZ2V0T3JkZXJEZXRhaWxzKFN0cmluZyBvcmRlck5vLCBTdHJpbmcgb3JkZXJMaW5lLCBTdHJpbmcgd2FyZWhvdXNlKSB7DQogICAgU3RyaW5nIEZBQ0kgPSAiIjsNCiAgICBkZWYgcGFyYW1DT0xpbmUgPSBbIkNPTk8iIDogaW5DT05PLCAiT1JOTyIgOiBvcmRlck5vLCAiUE9OUiIgOiBvcmRlckxpbmUsICJQT1NYIiA6ICIwIl0NCiAgICBkZWYgY2FsbGJhY2tDT0xpbmUgPSB7DQogICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+IA0KICAgICAgaWYgKHJlc3BvbnNlLklUTk8gIT0gbnVsbCkgew0KICAgICAgICAgIHpJVERTID0gcmVzcG9uc2UuSVREUy50cmltKCk7DQogICAgICAgICAgek9STk8gPSBvcmRlck5vOw0KICAgICAgICAgIElUTk9MSU5FID0gcmVzcG9uc2UuSVROTy50cmltKCk7DQogICAgICAgICAgaXNDTyA9IHRydWU7DQogICAgICB9DQogICAgfQ0KICAgIG1pQ2FsbGVyLmNhbGwoIk9JUzEwME1JIiwiR2V0TGluZSIsIHBhcmFtQ09MaW5lLCBjYWxsYmFja0NPTGluZSk7DQogICAgDQogICAgaWYgKGlzQ08pIHsNCiAgICAgIGRlZiBwYXJhbUNPSGVhZCA9IFsiQ09OTyIgOiBpbkNPTk8sICJPUk5PIiA6IG9yZGVyTm9dDQogICAgICBkZWYgY2FsbGJhY2tDT0hlYWQgPSB7DQogICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4gDQogICAgICAgIGlmIChyZXNwb25zZS5PUk5PICE9IG51bGwpIHsNCiAgICAgICAgICB6Q1VOTyA9IHJlc3BvbnNlLkNVTk8udHJpbSgpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBtaUNhbGxlci5jYWxsKCJPSVMxMDBNSSIsIkdldEhlYWQiLCBwYXJhbUNPSGVhZCwgY2FsbGJhY2tDT0hlYWQpOw0KICAgICAgDQogICAgICBkZWYgcGFyYW1DdXN0b21lciA9IFsiQ09OTyIgOiBpbkNPTk8sICJDVU5PIiA6IHpDVU5PXQ0KICAgICAgZGVmIGNhbGxiYWNrQ3VzdG9tZXIgPSB7DQogICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4gDQogICAgICAgIGlmIChyZXNwb25zZS5DVU5PICE9IG51bGwpIHsNCiAgICAgICAgICB6Q1VOTSA9IHJlc3BvbnNlLkNVTk0udHJpbSgpOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBtaUNhbGxlci5jYWxsKCJDUlM2MTBNSSIsIkdldEJhc2ljRGF0YSIsIHBhcmFtQ3VzdG9tZXIsIGNhbGxiYWNrQ3VzdG9tZXIpOw0KICAgICAgDQogICAgfQ0KICAgIA0KICAgIC8vIGlmIG5vdCBDTywgY2hlY2sgaWYgUE8NCiAgICBpZiAoIWlzQ08pIHsNCiAgICAgIA0KICAgICAgREJBY3Rpb24gZGJBY3Rpb24gPSBkYXRhYmFzZS50YWJsZSgiTVBMSU5FIikuaW5kZXgoIjAwIikuc2VsZWN0aW9uKCJJQlBJVEQiLCAiSUJTVU5PIiwgIklCSVROTyIpLmJ1aWxkKCk7DQogICAgICBEQkNvbnRhaW5lciBNUExJTkUgPSBkYkFjdGlvbi5jcmVhdGVDb250YWluZXIoKTsNCiAgICAgIE1QTElORS5zZXRJbnQoIklCQ09OTyIsIGluQ09OTy50b0ludGVnZXIoKSk7DQogICAgICBNUExJTkUuc2V0KCJJQlBVTk8iLCBvcmRlck5vKTsNCiAgICAgIE1QTElORS5zZXRJbnQoIklCUE5MSSIsIG9yZGVyTGluZS50b0ludGVnZXIoKSk7DQogICAgICBNUExJTkUuc2V0SW50KCJJQlBOTFMiLCAwKTsNCiAgICAgIA0KICAgICAgaWYgKGRiQWN0aW9uLnJlYWQoTVBMSU5FKSkgew0KICAgICAgICB6T1JOTyA9IG9yZGVyTm87DQogICAgICAgIHpJVERTID0gTVBMSU5FLmdldCgiSUJQSVREIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgIHpTVU5PID0gTVBMSU5FLmdldCgiSUJTVU5PIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgIElUTk9MSU5FID0gTVBMSU5FLmdldCgiSUJJVE5PIikudG9TdHJpbmcoKS50cmltKCk7DQogICAgICAgIGlzUE8gPSB0cnVlOw0KICAgICAgfQ0KICAgICAgDQogICAgICBpZiAoaXNQTykgew0KICAgICAgICBkZWYgcGFyYW1TdXBwbGllciA9IFsiQ09OTyIgOiBpbkNPTk8sICJTVU5PIiA6IHpTVU5PXQ0KICAgICAgICBkZWYgY2FsbGJhY2tTdXBwbGllciA9IHsNCiAgICAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+IA0KICAgICAgICAgIGlmIChyZXNwb25zZS5TVU5PICE9IG51bGwpIHsNCiAgICAgICAgICAgIHpDVU5NID0gcmVzcG9uc2UuU1VOTS50cmltKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIG1pQ2FsbGVyLmNhbGwoIkNSUzYyME1JIiwiR2V0QmFzaWNEYXRhIiwgcGFyYW1TdXBwbGllciwgY2FsbGJhY2tTdXBwbGllcik7DQogICAgICB9DQogICAgfQ0KICAgIA0KICAgIGlmICghaXNDTyAmJiAhaXNQTykgew0KICAgICAgZGVmIHBhcmFtRE9MaW5lID0gWyJUUk5SIiA6IG9yZGVyTm8sICJQT05SIiA6IG9yZGVyTGluZSwgIlBPU1giIDogIjAiXQ0KICAgICAgZGVmIGNhbGxiYWNrRE9MaW5lID0gew0KICAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+IA0KICAgICAgICBpZiAocmVzcG9uc2UuUE9OUiAhPSBudWxsKSB7DQogICAgICAgICAgeklURFMgPSByZXNwb25zZS5JVERTLnRyaW0oKTsNCiAgICAgICAgICB6T1JOTyA9IG9yZGVyTm87DQogICAgICAgICAgSVROT0xJTkUgPSByZXNwb25zZS5JVE5PLnRyaW0oKTsNCiAgICAgICAgICBpc0RPID0gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgbWlDYWxsZXIuY2FsbCgiTU1TMTAwTUkiLCJHZXRMaW5lIiwgcGFyYW1ET0xpbmUsIGNhbGxiYWNrRE9MaW5lKTsNCiAgICAgIA0KICAgICAgaWYgKGlzRE8pIHsNCiAgICAgICAgZGVmIHBhcmFtRE9IZWFkID0gWyJUUk5SIiA6IG9yZGVyTm9dDQogICAgICAgIGRlZiBjYWxsYmFja0RPSGVhZCA9IHsNCiAgICAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+IA0KICAgICAgICAgIGlmIChyZXNwb25zZS5UUk5SICE9IG51bGwpIHsNCiAgICAgICAgICAgIHpDVU5PID0gcmVzcG9uc2UuVFdMTy50cmltKCk7DQogICAgICAgICAgICBGQUNJID0gcmVzcG9uc2UuRkFDSS50cmltKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzEwME1JIiwiR2V0SGVhZCIsIHBhcmFtRE9IZWFkLCBjYWxsYmFja0RPSGVhZCk7DQogICAgICAgIA0KICAgICAgICBkZWYgcGFyYW1XYXJlaG91c2UgPSBbIkZBQ0kiIDogRkFDSSwgIklUTk8iIDogSVROT0xJTkVdDQogICAgICAgIGRlZiBjYWxsYmFja1dhcmVob3VzZSA9IHsNCiAgICAgICAgICBNYXA8U3RyaW5nLCBTdHJpbmc+IHJlc3BvbnNlIC0+IA0KICAgICAgICAgIGlmIChyZXNwb25zZS5GQUNJICE9IG51bGwpIHsNCiAgICAgICAgICAgIHpDVU5NID0gcmVzcG9uc2UuRkFDTi50cmltKCk7DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIG1pQ2FsbGVyLmNhbGwoIk1NUzIwME1JIiwiR2V0SXRtRmFjIiwgcGFyYW1XYXJlaG91c2UsIGNhbGxiYWNrV2FyZWhvdXNlKTsNCiAgICAgIH0NCiAgICB9DQogICAgDQogICAgbG9nZ2VyLmRlYnVnKCJJdGVtTnVtYmVyOiB7JElUTk9MSU5FfSBhbmQgV2FyZWhvdXNlIDogeyR3YXJlaG91c2V9Iik7DQogICAgZGVmIHBhcmFtUHJvZExpbmUgPSBbIkNPTk8iIDogaW5DT05PLCAiV0hMTyIgOiB3YXJlaG91c2UsICJJVE5PIiA6IElUTk9MSU5FXQ0KICAgIGRlZiBjYWxsYmFja1Byb2RMaW5lID0gew0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiByZXNwb25zZSAtPiANCiAgICAgIGlmIChyZXNwb25zZS5QRExOICE9IG51bGwpIHsNCiAgICAgICAgelBETE4gPSByZXNwb25zZS5QRExOLnRyaW0oKTsNCiAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMjAwTUkiLCJHZXRJdG1XaHNCYXNpYyIsIHBhcmFtUHJvZExpbmUsIGNhbGxiYWNrUHJvZExpbmUpOw0KICAgIA0KICB9DQogIA0KICAvKioNCiAgICogUmV0cmlldmUgT3JkZXIgTnVtYmVyIGdpdmVuIExvYWQgSWQNCiAgICoqLw0KICBwcml2YXRlIHZvaWQgZ2V0TG9hZElkRGV0YWlscyhTdHJpbmcgbG9hZElkLCBTdHJpbmcgd2FyZWhvdXNlKSB7DQoJCVN0cmluZyBvcmRlck5vLCBvcmRlckxpbmU7DQoJCQ0KICAgIC8vIFJldHJpZXZlIEVYVE9MTg0KICAgIERCQWN0aW9uIGRiQWN0aW9uID0gZGF0YWJhc2UudGFibGUoIkVYVE9MTiIpLmluZGV4KCIxMCIpLnNlbGVjdGlvbigiRVhPUk5PIiwgIkVYUE9OUiIsICJFWFBPU1giLCAiRVhJTElEIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBFWFRPTE4gPSBkYkFjdGlvbi5jcmVhdGVDb250YWluZXIoKTsNCiAgICBFWFRPTE4uc2V0SW50KCJFWENPTk8iLCBpbkNPTk8udG9JbnRlZ2VyKCkpOw0KICAgIEVYVE9MTi5zZXQoIkVYSUxJRCIsIGxvYWRJZCk7DQogICAgaWYgKGRiQWN0aW9uLnJlYWQoRVhUT0xOKSkgew0KICAgICAgZ2V0T3JkZXJEZXRhaWxzKEVYVE9MTi5nZXQoIkVYT1JOTyIpLnRvU3RyaW5nKCksIEVYVE9MTi5nZXQoIkVYUE9OUiIpLnRvU3RyaW5nKCksIHdhcmVob3VzZSk7DQogICAgICB6T1JOTyA9IGxvYWRJZDsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgDQogICAgLy8gUmV0cmlldmUgRVhUTVBMDQogICAgZGJBY3Rpb24gPSBkYXRhYmFzZS50YWJsZSgiRVhUTVBMIikuaW5kZXgoIjEwIikuc2VsZWN0aW9uKCJFWFBVTk8iLCAiRVhQTkxJIiwgIkVYUE5MUyIsICJFWElMSUQiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIEVYVE1QTCA9IGRiQWN0aW9uLmNyZWF0ZUNvbnRhaW5lcigpOw0KICAgIEVYVE9MTi5zZXRJbnQoIkVYQ09OTyIsIGluQ09OTy50b0ludGVnZXIoKSk7DQogICAgRVhUT0xOLnNldCgiRVhJTElEIiwgbG9hZElkKTsNCiAgICBpZiAoZGJBY3Rpb24ucmVhZChFWFRNUEwpKSB7DQogICAgICBnZXRPcmRlckRldGFpbHMoRVhUTVBMLmdldCgiRVhQVU5PIikudG9TdHJpbmcoKS50cmltKCksIEVYVE1QTC5nZXQoIkVYUE5MSSIpLnRvU3RyaW5nKCkudHJpbSgpLCB3YXJlaG91c2UpOw0KICAgICAgek9STk8gPSBsb2FkSWQ7DQogICAgICByZXR1cm47DQogICAgfQ0KICAgIA0KICB9DQogIA0KICAvKioNCiAgICogUmV0cmlldmUgdW5pdCBvZiBtZWFzdXJlDQogICAqKi8NCiAgcHJpdmF0ZSBTdHJpbmcgZ2V0VW5pdE9mTWVhc3VyZShTdHJpbmcgc2NhbGVJZCkgew0KICAgIFN0cmluZyB1bml0ID0gIiI7DQogICAgZGVmIHBhcmFtSXRlbSA9IFsiQ09OTyIgOiBpbkNPTk8sICJJVE5PIiA6IHNjYWxlSWRdDQogICAgQ2xvc3VyZTw/PiBoYW5kbGVySXRlbSA9IHsNCiAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gcmVzcG9uc2UgLT4gDQogICAgICBpZiAocmVzcG9uc2UuSVROTyAhPSBudWxsKSB7DQogICAgICAgIHVuaXQgPSByZXNwb25zZS5VTk1TLnRyaW0oKTsNCiAgICAgIH0NCiAgICB9DQogICAgbWlDYWxsZXIuY2FsbCgiTU1TMjAwTUkiLCJHZXRJdG1CYXNpYyIsIHBhcmFtSXRlbSwgaGFuZGxlckl0ZW0pOw0KICAgIHJldHVybiB1bml0Ow0KICB9DQogIA0KICAvKioNCiAgICogR2V0IHRpbWUgaW4gVVRDIHRpbWV6b25lDQogICAqKi8NCiAgcHJpdmF0ZSBab25lZERhdGVUaW1lIGdldFVUQ0RhdGVUaW1lKFN0cmluZyB3YXJlaG91c2UsIFN0cmluZyBkYXRlLCBTdHJpbmcgdGltZSkgew0KICAgIFN0cmluZyBvZmZzZXQsIHdhcmVob3VzZURhdGVUaW1lOw0KICAgIA0KICAgIGRlZiBwYXJhbVdhcmVob3VzZSA9IFsiV0hMTyIgOiB3YXJlaG91c2UsICJEQVRFIiA6IGRhdGUsICJUSU1FIiA6IHRpbWVdDQogICAgZGVmIGNhbGxiYWNrV2FyZWhvdXNlID0gew0KICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiByZXNwb25zZSAtPiANCiAgICAgIGlmIChyZXNwb25zZS5USVpPICE9IG51bGwpIHsNCiAgICAgICAgd2FyZWhvdXNlRGF0ZVRpbWUgPSByZXNwb25zZS5EQVRFLnRyaW0oKSArICIgIiArIHJlc3BvbnNlLlRJTUUudHJpbSgpOw0KICAgICAgICBvZmZzZXQgPSByZXNwb25zZS5UR01ULnN1YnN0cmluZygwLCAzKSArICI6IiArIHJlc3BvbnNlLlRHTVQuc3Vic3RyaW5nKDMpOw0KICAgICAgfQ0KICAgIH0NCiAgICBtaUNhbGxlci5jYWxsKCJEUlMwNDVNSSIsIkdldFdITE9EYXRhIiwgcGFyYW1XYXJlaG91c2UsIGNhbGxiYWNrV2FyZWhvdXNlKTsNCiAgICANCiAgICBEYXRlVGltZUZvcm1hdHRlciBmb3JtYXR0ZXIgPSBEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oInl5eXlNTWRkIEhIbW1zcyIpOw0KICAgIA0KICAgIGlmICh3YXJlaG91c2VEYXRlVGltZSA9PSBudWxsKSB7DQogICAgICB3YXJlaG91c2VEYXRlVGltZSA9IExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KGZvcm1hdHRlcik7DQogICAgICBvZmZzZXQgPSAiKzAxOjAwIjsNCiAgICB9DQogICAgDQogICAgTG9jYWxEYXRlVGltZSBsZHQgPSBMb2NhbERhdGVUaW1lLnBhcnNlKHdhcmVob3VzZURhdGVUaW1lLCBmb3JtYXR0ZXIpOw0KICAgIFpvbmVPZmZzZXQgem9uZU9mZnNldCA9IFpvbmVPZmZzZXQub2Yob2Zmc2V0KTsNCiAgICBPZmZzZXREYXRlVGltZSBvZHQgPSBPZmZzZXREYXRlVGltZS5vZihsZHQsIHpvbmVPZmZzZXQpOw0KICAgIFpvbmVkRGF0ZVRpbWUgdXRjWmR0ID0gb2R0LmF0Wm9uZVNhbWVJbnN0YW50KFpvbmVPZmZzZXQuVVRDKTsNCiAgICByZXR1cm4gdXRjWmR0Ow0KICB9DQogIA0KICANCn0="
    }
  }
}